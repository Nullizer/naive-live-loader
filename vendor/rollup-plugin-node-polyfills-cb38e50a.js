var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}var r=t,i=n;function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===t||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}"function"==typeof e.setTimeout&&(r=setTimeout),"function"==typeof e.clearTimeout&&(i=clearTimeout);var s,u=[],f=!1,a=-1;function l(){f&&s&&(f=!1,s.length?u=s.concat(u):a=-1,u.length&&c())}function c(){if(!f){var e=o(l);f=!0;for(var t=u.length;t;){for(s=u,u=[];++a<t;)s&&s[a].run();a=-1,t=u.length}s=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)};function p(){}var v=p,m=p,w=p,y=p,d=p,g=p,L=p;var _=e.performance||{},b=_.now||_.mozNow||_.msNow||_.oNow||_.webkitNow||function(){return(new Date).getTime()};var T=new Date;var E={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||f||o(c)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:v,addListener:m,once:w,off:y,removeListener:d,removeAllListeners:g,emit:L,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*b.call(_),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-T)/1e3}};function x(){}function C(){C.init.call(this)}function k(e){return void 0===e._maxListeners?C.defaultMaxListeners:e._maxListeners}function A(e,t,n){if(t)e.call(n);else for(var r=e.length,i=z(e,r),o=0;o<r;++o)i[o].call(n)}function M(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=z(e,i),s=0;s<i;++s)o[s].call(n,r)}function N(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=z(e,o),u=0;u<o;++u)s[u].call(n,r,i)}function D(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,u=z(e,s),f=0;f<s;++f)u[f].call(n,r,i,o)}function O(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=z(e,i),s=0;s<i;++s)o[s].apply(n,r)}function j(e,t,n,r){var i,o,s,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=new x,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=k(e))&&i>0&&s.length>i){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=s.length,u=f,"function"==typeof console.warn?console.warn(u):console.log(u)}}else s=o[t]=n,++e._eventsCount;return e}function U(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function P(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function z(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}x.prototype=Object.create(null),C.EventEmitter=C,C.usingDomains=!1,C.prototype.domain=void 0,C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.init=function(){this.domain=null,C.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new x,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},C.prototype.getMaxListeners=function(){return k(this)},C.prototype.emit=function(e){var t,n,r,i,o,s,u,f="error"===e;if(s=this._events)f=f&&null==s.error;else if(!f)return!1;if(u=this.domain,f){if(t=arguments[1],!u){if(t instanceof Error)throw t;var a=new Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t),!1}if(!(n=s[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:A(n,l,this);break;case 2:M(n,l,this,arguments[1]);break;case 3:N(n,l,this,arguments[1],arguments[2]);break;case 4:D(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];O(n,l,this,i)}return!0},C.prototype.addListener=function(e,t){return j(this,e,t,!1)},C.prototype.on=C.prototype.addListener,C.prototype.prependListener=function(e,t){return j(this,e,t,!0)},C.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,U(this,e,t)),this},C.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,U(this,e,t)),this},C.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new x:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new x,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,s||t)}return this},C.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new x,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new x:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new x,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},C.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},C.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):P.call(e,t)},C.prototype.listenerCount=P,C.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};export{C as E,E as b};
