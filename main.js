import{f as e}from"./vendor/flv.js-b465a89a.js";import"./vendor/rollup-plugin-node-polyfills-b833fabb.js";var t;const a=document.getElementById.bind(document),n=a("video_container"),l=a("main_video"),o=a("over_area"),d=a("fs"),r=a("playpause"),s=a("mute"),i=a("volume"),u=a("stream_url"),v=a("res");let c;const m=localStorage.getItem("volume");function p(){const e=Number.parseInt(v.value)||l.videoWidth;e&&(n.style.width=e/devicePixelRatio+"px")}function E(){const e=new URLSearchParams(location.search).get("stream");e&&(u.value=e)}l.volume=Number.parseFloat(m)||.1,l.addEventListener("volumechange",()=>{localStorage.setItem("volume",l.volume.toString())}),l.addEventListener("playing",()=>{i.value=(100*l.volume).toString()}),r.addEventListener("click",()=>{l.paused||l.ended?l.play():l.pause()}),s.addEventListener("click",()=>{l.muted=!l.muted}),d.addEventListener("click",()=>{document.fullscreen?document.exitFullscreen():n.requestFullscreen()}),i.addEventListener("input",()=>{l.volume=Number.parseInt(i.value)/100}),o.addEventListener("mouseenter",()=>{o.dataset.controlsState="show"}),o.addEventListener("mouseleave",()=>{o.dataset.controlsState="hide"}),v.addEventListener("change",p),l.addEventListener("playing",p),null===(t=a("load"))||void 0===t||t.addEventListener("submit",t=>{t.preventDefault();const a=u.value;if(c&&(c.detachMediaElement(),c.destroy()),c=e.createPlayer({type:"flv",isLive:!0,url:a},{enableStashBuffer:!1}),c.attachMediaElement(l),c.load(),c.play(),a){new URLSearchParams(location.search).get("stream")!==a&&history.pushState(null,"","?stream="+encodeURIComponent(a))}}),window.addEventListener("popstate",E),window.addEventListener("load",E);
