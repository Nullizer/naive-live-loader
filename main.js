import{f as e}from"./vendor/flv.js-6cefeb40.js";import"events";const t=document.querySelector.bind(document),a=t("#video_container"),n=t("#main_video"),r=t("#over_area"),s=t("#fs"),o=t("#playpause"),l=t("#mute"),d=t("#volume"),i=t("#stream_url"),u=t("#res");let c;const v=localStorage.getItem("volume");function m(){const e=Number.parseInt(u.value)||n.videoWidth;e&&(a.style.width=e/devicePixelRatio+"px")}function p(){const e=new URLSearchParams(location.search).get("stream");e&&(i.value=e)}n.volume=Number.parseFloat(v)||.1,n.addEventListener("volumechange",(()=>{localStorage.setItem("volume",n.volume.toString())})),n.addEventListener("playing",(()=>{d.value=(100*n.volume).toString()})),o.addEventListener("click",(()=>{n.paused||n.ended?n.play():n.pause()})),l.addEventListener("click",(()=>{n.muted=!n.muted})),s.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen():a.requestFullscreen()})),d.addEventListener("input",(()=>{n.volume=Number.parseInt(d.value)/100})),r.addEventListener("mouseenter",(()=>{r.dataset.controlsState="show"})),r.addEventListener("mouseleave",(()=>{r.dataset.controlsState="hide"})),u.addEventListener("change",m),n.addEventListener("playing",m),t("#load").addEventListener("submit",(t=>{t.preventDefault();const a=i.value=i.value.trim();if(!a)return;c&&(c.detachMediaElement(),c.destroy()),c=e.createPlayer({type:"flv",isLive:!0,url:a}),c.attachMediaElement(n),c.load(),c.play();const r=new URLSearchParams(location.search);r.get("stream")!==a&&(r.set("stream",a),history.pushState(null,"","?"+r))})),window.addEventListener("popstate",p),window.addEventListener("load",p);
