import{f as e}from"./vendor/flv.js-b465a89a.js";import"./vendor/rollup-plugin-node-polyfills-b833fabb.js";const t=document.querySelector.bind(document),a=t("#video_container"),n=t("#main_video"),r=t("#over_area"),o=t("#fs"),l=t("#playpause"),d=t("#mute"),s=t("#volume"),i=t("#stream_url"),u=t("#res");let v;const c=localStorage.getItem("volume");function m(){const e=Number.parseInt(u.value)||n.videoWidth;e&&(a.style.width=e/devicePixelRatio+"px")}function p(){var e;const t=null===(e=new URLSearchParams(location.search).get("stream"))||void 0===e?void 0:e.trim();t&&(i.value=t)}n.volume=Number.parseFloat(c)||.1,n.addEventListener("volumechange",()=>{localStorage.setItem("volume",n.volume.toString())}),n.addEventListener("playing",()=>{s.value=(100*n.volume).toString()}),l.addEventListener("click",()=>{n.paused||n.ended?n.play():n.pause()}),d.addEventListener("click",()=>{n.muted=!n.muted}),o.addEventListener("click",()=>{document.fullscreen?document.exitFullscreen():a.requestFullscreen()}),s.addEventListener("input",()=>{n.volume=Number.parseInt(s.value)/100}),r.addEventListener("mouseenter",()=>{r.dataset.controlsState="show"}),r.addEventListener("mouseleave",()=>{r.dataset.controlsState="hide"}),u.addEventListener("change",m),n.addEventListener("playing",m),t("#load").addEventListener("submit",t=>{var a;t.preventDefault();const r=i.value.trim();if(!r)return;v&&(v.detachMediaElement(),v.destroy()),v=e.createPlayer({type:"flv",isLive:!0,url:r}),v.attachMediaElement(n),v.load(),v.play();const o=new URLSearchParams(location.search);(null===(a=o.get("stream"))||void 0===a?void 0:a.trim())!==r&&(o.set("stream",r),history.pushState(null,"","?"+o))}),window.addEventListener("popstate",p),window.addEventListener("load",p);
