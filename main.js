import"./vendor/rollup-plugin-node-polyfills-cb38e50a.js";import"./vendor/es6-promise-97039a4d.js";import{f as e}from"./vendor/flv.js-a0fd9102.js";import"./vendor/webworkify-46fa361f.js";const t=document.querySelector.bind(document),a=t("#video_container"),n=t("#main_video"),r=t("#over_area"),o=t("#fs"),s=t("#playpause"),d=t("#mute"),l=t("#volume"),i=t("#stream_url"),u=t("#res");let v;const c=localStorage.getItem("volume");function m(){const e=Number.parseInt(u.value)||n.videoWidth;e&&(a.style.width=e/devicePixelRatio+"px")}function p(){const e=new URLSearchParams(location.search).get("stream");e&&(i.value=e)}n.volume=Number.parseFloat(c)||.1,n.addEventListener("volumechange",()=>{localStorage.setItem("volume",n.volume.toString())}),n.addEventListener("playing",()=>{l.value=(100*n.volume).toString()}),s.addEventListener("click",()=>{n.paused||n.ended?n.play():n.pause()}),d.addEventListener("click",()=>{n.muted=!n.muted}),o.addEventListener("click",()=>{document.fullscreen?document.exitFullscreen():a.requestFullscreen()}),l.addEventListener("input",()=>{n.volume=Number.parseInt(l.value)/100}),r.addEventListener("mouseenter",()=>{r.dataset.controlsState="show"}),r.addEventListener("mouseleave",()=>{r.dataset.controlsState="hide"}),u.addEventListener("change",m),n.addEventListener("playing",m),t("#load").addEventListener("submit",t=>{t.preventDefault();const a=i.value=i.value.trim();if(!a)return;v&&(v.detachMediaElement(),v.destroy()),v=e.createPlayer({type:"flv",isLive:!0,url:a}),v.attachMediaElement(n),v.load(),v.play();const r=new URLSearchParams(location.search);r.get("stream")!==a&&(r.set("stream",a),history.pushState(null,"","?"+r))}),window.addEventListener("popstate",p),window.addEventListener("load",p);
